<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.js"
      integrity="sha512-y5GdcvG8/LoqZllcaDnZKY4hKSDowG4vWAytStZ1AZ8sxgWke7KtkMx3G9KQU0Ih3kIDfY/3EO1sSyKGRxqwJQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css"
    />

    <link rel="stylesheet" href="../styles/style.css" />
    <title>Dashboard</title>
  </head>
  <body
    class="bg-gray-100 dark:bg-gray-800"
    style="font-family: 'Inter', sans-serif"
  >
    <div class="flex h-screen flex-row">
      <!-- Sidebar -->
      <div
        class="w-80 h-screen border-r dark:border-gray-600 border-gray-300 p-4 flex flex-col text-gray-600 dark:text-gray-100 text-sm bg-gray-50 dark:bg-gray-800"
      >
        <div class="flex flex-row gap-4 py-2">
          <div class="profile">
            <img
              src="../images/profile.png"
              alt=""
              class="h-16 w-16 rounded-full object-cover"
            />
          </div>
          <div class="flex flex-col justify-center">
            <div class="text-xl">John Doe</div>
            <div class="text-xs text-slate-400">Sales Manager</div>
          </div>
        </div>

        <div class="flex flex-col rounded-md mt-4">
          <a
            href="maindashboard.html"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full bg-slate-200 dark:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-apps flex"></i>
            <span>Dashboard </span>
          </a>
          <a
            href="products.html"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-box-open flex"></i>
            <span>Products</span>
          </a>
          <a
            href="#"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-shopping-bag flex"></i>
            <span>Orders</span>
          </a>
          <a
            href="#"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-chart-line-up flex"></i>
            <span>Performance</span>
          </a>
          <a
            href="#"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-megaphone flex"></i>
            <span>Campaigns</span>
          </a>
          <a
            href="#"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700 mb-1"
          >
            <i class="fi fi-rr-receipt flex"></i>
            <span>Payments & Transactions</span>
          </a>
        </div>
        <div
          class="flex flex-col rounded-md my-4 h-0.5 border-b border-gray-300 dark:border-gray-600"
        ></div>

        <!-- Dark Mode Toggle Switch -->
        <div class="">
          <div class="flex items-center justify-between px-3 text-sm">
            <span>Dark Mode</span>
            <label class="relative flex items-center cursor-pointer w-8 h-4">
              <!-- The peer checkbox -->
              <input type="checkbox" id="darkModeSwitch" class="sr-only peer" />

              <!-- The background track -->
              <div
                class="w-full h-full bg-gray-400 rounded-full peer-checked:bg-blue-600 transition-colors duration-300"
              ></div>

              <!-- The knob (sibling of the .peer input) -->
              <div
                class="absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 transform peer-checked:translate-x-4"
              ></div>
            </label>
          </div>
        </div>

        <div class="mt-auto">
          <a
            href="#"
            class="flex flex-row gap-4 p-3 rounded-md items-center w-full hover:bg-slate-200 dark:hover:bg-slate-700"
          >
            <i class="fi fi-rr-user-logout flex"></i>
            <span>Logout</span>
          </a>
        </div>
      </div>

      <!-- Main content area -->
      <div class="main-container w-full">
        <!-- Header -->
        <div
          class="sticky top-0 z-50 w-full p-8 border-b border-gray-300 dark:border-gray-600 flex flex-row justify-between items-center bg-gray-50 dark:bg-gray-800 shadow-sm"
        >
          <h1 class="text-4xl font-bold text-gray-800 dark:text-gray-100">
            Dashboard
          </h1>
          <div class="relative w-72 flex items-center">
            <!-- Search box -->
            <div class="relative flex-1">
              <i
                class="fi fi-rr-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-300"
              ></i>
              <input
                type="text"
                placeholder="Search..."
                class="bg-transparent dark:bg-slate-700 border border-gray-300 dark:border-gray-600 dark:text-gray-100 rounded-md pl-10 pr-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
            <!-- Bell icon -->
            <button
              id="notification-btn"
              class="relative ml-3 p-3 rounded-lg border bg-transparent dark:bg-slate-700 border-gray-300 dark:border-gray-600"
            >
              <i
                class="flex fi fi-rr-bell text-gray-500 dark:text-gray-300"
              ></i>

              <!-- Notification badge -->
              <span
                class="absolute bottom-5 right-1 flex items-center justify-center w-4 h-4 text-xs text-white bg-red-500 rounded-full"
              >
                3
              </span>
            </button>

            <!-- Sidebar notification panel -->
            <div
              id="notification-sidebar"
              class="fixed top-0 right-0 h-full w-80 bg-white dark:bg-slate-800 shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50"
            >
              <div
                class="flex items-center justify-between p-4 border-b dark:border-slate-700"
              >
                <h2
                  class="text-lg font-semibold text-gray-700 dark:text-gray-200"
                >
                  Notifications
                </h2>
                <button
                  id="close-sidebar"
                  class="text-gray-500 hover:text-gray-800 dark:hover:text-gray-300"
                >
                  âœ•
                </button>
              </div>

              <ul class="divide-y divide-gray-200 dark:divide-gray-700">
                <li
                  class="p-4 hover:bg-gray-100 dark:hover:bg-slate-700 cursor-pointer"
                >
                  New comment on your post
                </li>
                <li
                  class="p-4 hover:bg-gray-100 dark:hover:bg-slate-700 cursor-pointer"
                >
                  You have 2 new followers
                </li>
                <li
                  class="p-4 hover:bg-gray-100 dark:hover:bg-slate-700 cursor-pointer"
                >
                  System update available
                </li>
              </ul>
            </div>

            <!-- Dark overlay -->
            <div
              id="overlay"
              class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"
            ></div>
          </div>
        </div>
        <!--Todays date & CTA-->
        <div class="flex flex-row justify-between items-center">
          <div>
            <h2
              id="date"
              class="text-lg font-semibold text-gray-800 dark:text-gray-100 mt-6 px-6"
            ></h2>
            <script>
              function updateDateTime() {
                const now = new Date();
                const dateOptions = {
                  weekday: "long",
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                };

                const formattedDate = now.toLocaleDateString(
                  "en-US",
                  dateOptions
                );

                const formattedTime = now.toLocaleTimeString("en-US", {
                  hour: "2-digit",
                  minute: "2-digit",
                  second: "2-digit",
                });

                document.getElementById("date").innerText = `${formattedDate}`;
              }

              // Run immediately once
              updateDateTime();

              // Update every second
              setInterval(updateDateTime, 1000);
            </script>
          </div>
          <div class="px-6 mt-6">
            <button
              class="bg-blue-600 dark:bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition text-sm"
            >
              <i class="fi fi-rr-plus mr-2"></i>
              Add New Product
            </button>
          </div>
        </div>
        <!-- Cards -->
        <div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6 px-6">
            <!-- Total Sales -->
            <div
              class="z-0 relative p-6 bg-gray-50 dark:bg-slate-600 rounded-lg flex flex-col border border-gray-300 dark:border-gray-600 overflow-hidden"
            >
              <!-- Background Icon -->
              <i
                class="fi fi-rr-shopping-bag text-blue-500/50 text-7xl absolute top-4 right-4 -z-10"
              ></i>

              <h3 class="dark:text-gray-300 text-sm">Total Sales</h3>
              <p class="text-2xl font-bold dark:text-white mt-2">$25,300</p>
            </div>
            <!-- Low Stock Alerts -->
            <div
              class="relative p-6 bg-gray-50 dark:bg-slate-600 rounded-lg flex flex-col border border-gray-300 dark:border-gray-600 overflow-hidden"
            >
              <!-- Background Icon -->
              <i
                class="fi fi-rr-box text-yellow-500/50 text-7xl absolute top-4 right-4"
              ></i>

              <h3 class="dark:text-gray-300 text-sm">Low Stock Alerts</h3>
              <p class="text-2xl font-bold dark:text-white mt-2">12</p>
              <span class="text-xs dark:text-gray-300"
                >Products running low</span
              >
            </div>
            <!-- Pending Shipments -->
            <div
              class="relative p-6 bg-gray-50 dark:bg-slate-600 rounded-lg flex flex-col border border-gray-300 dark:border-gray-600 overflow-hidden"
            >
              <!-- Background Icon -->
              <i
                class="fi fi-rr-truck-loading text-green-500/50 text-7xl absolute top-4 right-4"
              ></i>

              <h3 class="dark:text-gray-300 text-sm">Pending Shipments</h3>
              <p class="text-2xl font-bold dark:text-white mt-2">8</p>
              <span class="text-xs dark:text-gray-300"
                >Awaiting fulfillment</span
              >
            </div>
          </div>
        </div>

        <!-- Graphs -->
        <div class="py-8 px-6">
          <h2 class="text-2xl font-semibold dark:text-gray-100">Analytics</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6 px-0">
            <!-- Revenue Chart -->
            <div
              class="md:col-span-2 p-6 bg-gray-50 dark:bg-slate-600 rounded-lg border border-gray-300 dark:border-gray-600"
            >
              <h3 class="dark:text-gray-100 text-2xl font-bold">
                Revenue in GHc
              </h3>
              <div class="mt-4">
                <canvas id="revenueChart" class="w-full h-80">
                  <!-- Chart.js will render the chart here -->
                </canvas>
              </div>
            </div>

            <!-- Trending items list -->
            <div
              class="p-6 bg-gray-50 dark:bg-slate-600 rounded-lg border border-gray-300 dark:border-gray-600"
            >
              <h3 class="dark:text-gray-100 font-bold text-2xl">
                Trending Items
              </h3>
              <div class="mt-4">
                <ul class="w-full">
                  <!-- Header Row -->
                  <li
                    class="grid grid-cols-[60px_1fr_80px] gap-2 mb-4 font-semibold dark:text-gray-200 text-sm"
                  >
                    <div>Item</div>
                    <div></div>
                    <div class="text-right">Units Sold</div>
                  </li>
                  <div
                    class="flex flex-col rounded-md my-2 h-0.5 border-b border-gray-300 dark:border-gray-100"
                  ></div>

                  <!-- Item Row -->
                  <li
                    class="grid grid-cols-[60px_1fr_80px] gap-2 items-center mb-4 dark:text-gray-100 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700"
                  >
                    <div>
                      <img
                        src="../images/item1.webp"
                        alt="iPhone 17 Pro Max"
                        class="h-12 w-12 rounded-md object-cover"
                      />
                    </div>
                    <div class="text-base">iPhone 17 Pro Max</div>
                    <div class="text-sm text-right">424</div>
                  </li>
                  <li
                    class="grid grid-cols-[60px_1fr_80px] gap-2 items-center mb-4 dark:text-gray-100 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700"
                  >
                    <div>
                      <img
                        src="../images/microphone.png"
                        alt="Rode"
                        class="h-12 w-12 rounded-md object-cover dark:bg-gray-400"
                      />
                    </div>
                    <div class="text-base">Rode NT1A Condenser Microphone</div>
                    <div class="text-sm text-right">256</div>
                  </li>
                  <li
                    class="grid grid-cols-[60px_1fr_80px] gap-2 items-center mb-4 dark:text-gray-100 p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700"
                  >
                    <div>
                      <img
                        src="../images/JBL.png"
                        alt="JBL"
                        class="h-12 w-12 rounded-md object-cover dark:bg-gray-400"
                      />
                    </div>
                    <div class="text-base">JBL Bluetooth Speaker</div>
                    <div class="text-sm text-right">245</div>
                  </li>

                  <a
                    href="#"
                    class="flex w-full text-gray-50 text-sm text-center justify-center p-4 border border-blue-600 rounded-md bg-blue-600"
                    >See more</a
                  >
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div
          class="w-full p-4 border-t border-gray-300 dark:border-gray-600 text-center text-sm text-gray-600 dark:text-gray-300"
        >
          &copy; 2025 Ecommerce. All rights reserved.
        </div>
      </div>
    </div>

    <script>
      const btn = document.getElementById("notification-btn");
      const sidebar = document.getElementById("notification-sidebar");
      const overlay = document.getElementById("overlay");
      const closeBtn = document.getElementById("close-sidebar");

      btn.addEventListener("click", () => {
        sidebar.classList.remove("translate-x-full");
        overlay.classList.remove("hidden");
      });

      closeBtn.addEventListener("click", () => {
        sidebar.classList.add("translate-x-full");
        overlay.classList.add("hidden");
      });

      overlay.addEventListener("click", () => {
        sidebar.classList.add("translate-x-full");
        overlay.classList.add("hidden");
      });
    </script>
    <script>
      const ctx = document.getElementById("revenueChart").getContext("2d");

      function getChartColors() {
        const isDark = document.documentElement.classList.contains("dark");
        return {
          text: isDark ? "#f9fafb" : "#1f2937", // light/dark text
          grid: isDark ? "#374151" : "#e5e7eb", // dark: gray-700, light: gray-200
        };
      }

      // Create chart
      let colors = getChartColors();
      const revenueChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul"],
          datasets: [
            {
              label: "Revenue",
              data: [1000, 1500, 1200, 1800, 1600, 2500, 2000],
              borderColor: "rgba(59, 130, 246, 1)",
              backgroundColor: "rgba(59, 130, 246, 0.2)",
              fill: true,
              tension: 0.4,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: {
                color: colors.text,
              },
            },
          },
          scales: {
            x: {
              ticks: { color: colors.text },
              grid: { color: colors.grid },
            },
            y: {
              ticks: { color: colors.text },
              grid: { color: colors.grid },
            },
          },
        },
      });

      // ðŸ”¥ Watch for dark mode toggle
      const observer = new MutationObserver(() => {
        colors = getChartColors();
        revenueChart.options.plugins.legend.labels.color = colors.text;
        revenueChart.options.scales.x.ticks.color = colors.text;
        revenueChart.options.scales.y.ticks.color = colors.text;
        revenueChart.options.scales.x.grid.color = colors.grid;
        revenueChart.options.scales.y.grid.color = colors.grid;
        revenueChart.update();
      });

      // Observe changes to the <html> class (Tailwind adds/removes `dark`)
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["class"],
      });
    </script>
    <script>
      const checkbox = document.getElementById("darkModeSwitch");

      if (localStorage.getItem("theme") === "dark") {
        document.documentElement.classList.add("dark");
        checkbox.checked = true;
      }

      checkbox.addEventListener("change", () => {
        if (checkbox.checked) {
          document.documentElement.classList.add("dark");
          localStorage.setItem("theme", "dark");
        } else {
          document.documentElement.classList.remove("dark");
          localStorage.setItem("theme", "light");
        }
      });
    </script>
    <script>
      function toggleMenu(menuId) {
        const menu = document.getElementById(menuId);
        const arrow = document.getElementById(menuId + "Arrow");

        menu.classList.toggle("hidden");
        if (arrow) {
          arrow.classList.toggle("rotate-180"); // rotate arrow on toggle
        }
      }
    </script>
  </body>
</html>
